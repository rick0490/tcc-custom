<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Settings - Control Center</title>
	<!-- PWA Meta Tags -->
	<meta name="theme-color" content="#1f2937">
	<meta name="description" content="System settings and user management">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="apple-mobile-web-app-title" content="Control Center">
	<!-- PWA Links -->
	<link rel="manifest" href="/manifest.json">
	<link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
	<link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
	<!-- Google Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Oswald:wght@500;600;700&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">
	<!-- Styles -->
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="css/style.css?v=16">
	<!-- Theme initialization (prevents flash of wrong theme) -->
	<script>
		(function() {
			const theme = localStorage.getItem('theme') ||
				(window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
			document.documentElement.setAttribute('data-theme', theme);
		})();
	</script>
	<style>
		.settings-tab {
			padding: 0.5rem 1rem;
			border-radius: 0.375rem;
			transition: all 0.2s;
			color: var(--text-muted);
			background: transparent;
		}
		.settings-tab:hover {
			background: var(--bg-tertiary);
			color: var(--text-primary);
		}
		.settings-tab.active {
			background: var(--accent-blue);
			color: #FFFFFF;
		}
		.setting-group {
			margin-bottom: 1.5rem;
			padding-bottom: 1.5rem;
			border-bottom: 1px solid var(--border-color);
		}
		.setting-group:last-child {
			border-bottom: none;
		}
	</style>
</head>
<body class="min-h-screen">
	<!-- Alert Container -->
	<div id="alertContainer" class="fixed top-4 right-4 z-50 space-y-2 max-w-md"></div>

	<!-- Change Password Section -->
	<section class="mb-6">
		<div class="bg-gray-800 rounded-lg border border-gray-700 p-6">
			<h2 class="text-xl font-bold text-white mb-6">Change Password</h2>

			<form id="changePasswordForm" class="max-w-md space-y-4" autocomplete="on">
				<!-- Hidden username field for accessibility -->
				<input type="text" id="changePasswordUsername" autocomplete="username" class="hidden" aria-hidden="true">

				<div>
					<label for="currentPassword" class="block text-sm font-medium text-gray-300 mb-2">
						Current Password
					</label>
					<input
						type="password"
						id="currentPassword"
						required
						autocomplete="current-password"
						class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
					>
				</div>

				<div>
					<label for="newPassword" class="block text-sm font-medium text-gray-300 mb-2">
						New Password
					</label>
					<input
						type="password"
						id="newPassword"
						required
						minlength="8"
						autocomplete="new-password"
						class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
					>
				</div>

				<div>
					<label for="confirmPassword" class="block text-sm font-medium text-gray-300 mb-2">
						Confirm New Password
					</label>
					<input
						type="password"
						id="confirmPassword"
						required
						minlength="8"
						autocomplete="new-password"
						class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"
					>
				</div>

				<button
					type="submit"
					class="bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-2 rounded-md transition"
				>
					Change Password
				</button>
			</form>
		</div>
	</section>

	<!-- Admin-Only System Settings -->
	<section id="adminSettings" class="hidden">
		<div class="bg-gray-800 rounded-lg border border-gray-700 p-6 mb-6">
			<h2 class="text-xl font-bold text-white mb-6">
				System Settings (Admin Only)
			</h2>

			<!-- Settings Tabs -->
			<div class="border-b border-gray-700 mb-6">
				<nav class="flex flex-wrap gap-2">
					<button onclick="switchSettingsTab('notifications')" data-tab="notifications" class="settings-tab active">
						Notifications
					</button>
					<button onclick="switchSettingsTab('display')" data-tab="display" class="settings-tab">
						Display Settings
					</button>
					<button onclick="switchSettingsTab('bracketDisplay')" data-tab="bracketDisplay" class="settings-tab">
						Bracket Display
					</button>
					<button onclick="switchSettingsTab('discord')" data-tab="discord" class="settings-tab">
						Discord
					</button>
				</nav>
			</div>

			<!-- Tab Content -->
			<div id="settingsTabContent">
				<!-- Content will be loaded here -->
			</div>
		</div>
	</section>

	<script src="js/utils.js?v=4"></script>
	<script src="js/nav.js?v=3"></script>
	<script src="js/pwa.js?v=3"></script>
	<script src="js/settings.js?v=15"></script>
	<script>
		document.addEventListener('DOMContentLoaded', () => {
			initNavigation('Settings');
		});
	</script>
</body>
</html>
