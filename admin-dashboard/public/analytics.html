<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Analytics - Control Center</title>
	<!-- PWA Meta Tags -->
	<meta name="theme-color" content="#1f2937">
	<meta name="description" content="Tournament analytics and player statistics">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="apple-mobile-web-app-title" content="Control Center">
	<!-- PWA Links -->
	<link rel="manifest" href="/manifest.json">
	<link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
	<link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
	<!-- Styles -->
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="css/style.css?v=16">
	<!-- Theme initialization (prevents flash of wrong theme) -->
	<script>
		(function() {
			const theme = localStorage.getItem('theme') ||
				(window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
			document.documentElement.setAttribute('data-theme', theme);
		})();
	</script>
	<!-- ApexCharts -->
	<script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.0/dist/apexcharts.min.js"></script>
	<style>
		.game-tab {
			padding: 0.5rem 1rem;
			border-radius: 0.375rem;
			transition: all 0.2s;
			color: #9CA3AF;
			background: transparent;
			white-space: nowrap;
		}
		.game-tab:hover {
			background: #374151;
			color: #FFFFFF;
		}
		.game-tab.active {
			background: #2563EB;
			color: #FFFFFF;
		}
		.content-tab {
			padding: 0.5rem 1rem;
			border-bottom: 2px solid transparent;
			transition: all 0.2s;
			color: #9CA3AF;
		}
		.content-tab:hover {
			color: #FFFFFF;
		}
		.content-tab.active {
			color: #3B82F6;
			border-bottom-color: #3B82F6;
		}
		.stat-card {
			background: #1F2937;
			border: 1px solid #374151;
			border-radius: 0.5rem;
			padding: 1.25rem;
		}
		.stat-value {
			font-size: 2rem;
			font-weight: 700;
			color: #FFFFFF;
		}
		.stat-label {
			font-size: 0.875rem;
			color: #9CA3AF;
		}
		.player-card {
			background: #1F2937;
			border: 1px solid #374151;
			border-radius: 0.5rem;
			padding: 1rem;
			transition: all 0.2s;
			cursor: pointer;
		}
		.player-card:hover {
			border-color: #3B82F6;
			background: #263244;
		}
		.rank-badge {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			width: 2rem;
			height: 2rem;
			border-radius: 50%;
			font-weight: 700;
			font-size: 0.875rem;
		}
		.rank-1 { background: #FCD34D; color: #78350F; }
		.rank-2 { background: #D1D5DB; color: #374151; }
		.rank-3 { background: #D97706; color: #FFFFFF; }
		.elo-badge {
			background: #1E3A5F;
			color: #60A5FA;
			padding: 0.25rem 0.5rem;
			border-radius: 0.25rem;
			font-size: 0.75rem;
			font-weight: 600;
		}
		.win-rate-bar {
			height: 6px;
			background: #374151;
			border-radius: 3px;
			overflow: hidden;
		}
		.win-rate-fill {
			height: 100%;
			background: linear-gradient(90deg, #10B981, #34D399);
			transition: width 0.3s;
		}
		.archive-btn {
			background: #059669;
			transition: all 0.2s;
		}
		.archive-btn:hover {
			background: #047857;
		}
		.archive-btn:disabled {
			background: #374151;
			cursor: not-allowed;
		}
	</style>
</head>
<body class="min-h-screen">
	<!-- Alert Container -->
	<div id="alertContainer" class="fixed top-4 right-4 z-50 space-y-2 max-w-md"></div>

	<!-- Game Tabs Section -->
	<section class="mb-6">
		<div class="bg-gray-800 rounded-lg border border-gray-700 p-4">
			<div class="flex items-center justify-between mb-4">
				<h2 class="text-lg font-bold text-white">Game Filter</h2>
				<button onclick="openArchiveModal()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md transition text-sm">
					Archive Tournaments
				</button>
			</div>
			<div id="gameTabsContainer" class="flex flex-wrap gap-2">
				<button class="game-tab active" data-game="all" onclick="selectGame('all')">All Games</button>
				<!-- Game tabs will be populated dynamically -->
			</div>
		</div>
	</section>

	<!-- Stats Overview -->
	<section class="mb-6">
		<div class="grid grid-cols-2 md:grid-cols-4 gap-4">
			<div class="stat-card">
				<div id="statTournaments" class="stat-value">--</div>
				<div class="stat-label">Tournaments</div>
			</div>
			<div class="stat-card">
				<div id="statPlayers" class="stat-value">--</div>
				<div class="stat-label">Players</div>
			</div>
			<div class="stat-card">
				<div id="statMatches" class="stat-value">--</div>
				<div class="stat-label">Matches</div>
			</div>
			<div class="stat-card">
				<div id="statAvgAttendance" class="stat-value">--</div>
				<div class="stat-label">Avg Attendance</div>
			</div>
		</div>
	</section>

	<!-- Content Tabs -->
	<section class="mb-6">
		<div class="bg-gray-800 rounded-lg border border-gray-700">
			<!-- Tab Navigation -->
			<div class="border-b border-gray-700 px-4">
				<nav class="flex gap-4 overflow-x-auto">
					<button class="content-tab active" data-tab="rankings" onclick="switchContentTab('rankings')">Rankings</button>
					<button class="content-tab" data-tab="players" onclick="switchContentTab('players')">Players</button>
					<button class="content-tab" data-tab="tournaments" onclick="switchContentTab('tournaments')">Tournaments</button>
					<button class="content-tab" data-tab="headtohead" onclick="switchContentTab('headtohead')">Head-to-Head</button>
					<button class="content-tab" data-tab="attendance" onclick="switchContentTab('attendance')">Attendance</button>
				</nav>
			</div>

			<!-- Tab Content -->
			<div class="p-6">
				<!-- Rankings Tab -->
				<div id="rankingsTab" class="tab-content">
					<div class="flex items-center justify-between mb-4">
						<h3 class="text-lg font-bold text-white">Player Rankings</h3>
						<select id="rankingsSortBy" onchange="loadRankings()" class="bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-sm">
							<option value="elo">Sort by Elo</option>
							<option value="wins">Sort by Wins</option>
							<option value="winrate">Sort by Win Rate</option>
							<option value="attendance">Sort by Attendance</option>
						</select>
					</div>
					<div id="rankingsContent" class="space-y-2">
						<p class="text-gray-400 text-center py-8">Select a game to view rankings</p>
					</div>
				</div>

				<!-- Players Tab -->
				<div id="playersTab" class="tab-content hidden">
					<div class="mb-4">
						<input type="text" id="playerSearch" placeholder="Search players..."
							class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500"
							oninput="searchPlayers()">
					</div>
					<div id="playersContent" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
						<p class="text-gray-400 text-center py-8 col-span-full">Search for a player above</p>
					</div>
				</div>

				<!-- Tournaments Tab -->
				<div id="tournamentsTab" class="tab-content hidden">
					<h3 class="text-lg font-bold text-white mb-4">Archived Tournaments</h3>
					<div id="tournamentsContent" class="space-y-3">
						<p class="text-gray-400 text-center py-8">Loading tournaments...</p>
					</div>
				</div>

				<!-- Head-to-Head Tab -->
				<div id="headtoheadTab" class="tab-content hidden">
					<h3 class="text-lg font-bold text-white mb-4">Head-to-Head Comparison</h3>
					<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
						<div>
							<label class="block text-sm text-gray-400 mb-2">Player 1</label>
							<input type="text" id="h2hPlayer1Search" placeholder="Search player..."
								class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 text-white placeholder-gray-400"
								oninput="searchH2HPlayer(1)">
							<div id="h2hPlayer1Dropdown" class="hidden mt-1 bg-gray-700 border border-gray-600 rounded-md max-h-40 overflow-y-auto"></div>
							<input type="hidden" id="h2hPlayer1Id">
							<div id="h2hPlayer1Selected" class="mt-2 hidden">
								<span class="bg-blue-600 text-white px-3 py-1 rounded-full text-sm"></span>
							</div>
						</div>
						<div>
							<label class="block text-sm text-gray-400 mb-2">Player 2</label>
							<input type="text" id="h2hPlayer2Search" placeholder="Search player..."
								class="w-full bg-gray-700 border border-gray-600 rounded-md px-4 py-2 text-white placeholder-gray-400"
								oninput="searchH2HPlayer(2)">
							<div id="h2hPlayer2Dropdown" class="hidden mt-1 bg-gray-700 border border-gray-600 rounded-md max-h-40 overflow-y-auto"></div>
							<input type="hidden" id="h2hPlayer2Id">
							<div id="h2hPlayer2Selected" class="mt-2 hidden">
								<span class="bg-blue-600 text-white px-3 py-1 rounded-full text-sm"></span>
							</div>
						</div>
					</div>
					<button onclick="loadHeadToHead()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition mb-6">
						Compare Players
					</button>
					<div id="h2hContent">
						<p class="text-gray-400 text-center py-8">Select two players to compare</p>
					</div>
				</div>

				<!-- Attendance Tab -->
				<div id="attendanceTab" class="tab-content hidden">
					<h3 class="text-lg font-bold text-white mb-4">Attendance Trends</h3>
					<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
						<div>
							<h4 class="text-md font-semibold text-gray-300 mb-3">Monthly Attendance</h4>
							<div id="attendanceChart" class="bg-gray-750 rounded-lg p-4" style="min-height: 300px;"></div>
						</div>
						<div>
							<h4 class="text-md font-semibold text-gray-300 mb-3">New vs Returning Players</h4>
							<div id="newVsReturningChart" class="bg-gray-750 rounded-lg p-4" style="min-height: 300px;"></div>
						</div>
					</div>
					<div class="mt-6">
						<h4 class="text-md font-semibold text-gray-300 mb-3">Top Attendees</h4>
						<div id="topAttendeesContent" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3">
							<!-- Top attendees will be loaded here -->
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Seeding Suggestions Section -->
	<section class="mb-6">
		<div class="bg-gray-800 rounded-lg border border-gray-700">
			<div class="p-4 border-b border-gray-700">
				<div class="flex items-center justify-between flex-wrap gap-4">
					<div>
						<h2 class="text-lg font-bold text-white">Seeding Suggestions</h2>
						<p class="text-sm text-gray-400">Real-time seeding based on Elo rankings</p>
					</div>
					<div class="flex items-center gap-3 flex-wrap">
						<select id="seedingTournamentSelect" onchange="onSeedingTournamentChange()"
							class="bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-sm text-white min-w-[200px]">
							<option value="">Select tournament...</option>
						</select>
						<!-- AI Seeding Toggle -->
						<label class="flex items-center gap-2 cursor-pointer" id="aiSeedingToggleLabel">
							<input type="checkbox" id="aiSeedingToggle" onchange="toggleAISeeding(this.checked)"
								class="w-4 h-4 rounded border-gray-500 bg-gray-700 text-purple-600 focus:ring-purple-500 focus:ring-offset-gray-800">
							<span class="text-sm text-gray-300">AI Seeding</span>
							<span id="aiSeedingStatus" class="hidden px-2 py-0.5 rounded text-xs font-medium bg-purple-600 text-purple-100">Available</span>
						</label>
						<button id="seedingPollToggle" onclick="toggleSeedingPolling()"
							class="bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-md transition text-sm flex items-center gap-2 disabled:opacity-50"
							disabled>
							<span id="seedingPollIcon" class="w-2 h-2 rounded-full bg-gray-400"></span>
							<span id="seedingPollText">Start Polling</span>
						</button>
					</div>
				</div>
			</div>
			<div class="p-4">
				<!-- Polling Status Bar -->
				<div id="seedingStatusBar" class="hidden mb-4 bg-gray-750 rounded-lg p-3 flex items-center justify-between">
					<div class="flex items-center gap-3">
						<span id="seedingStatusIndicator" class="w-3 h-3 rounded-full bg-gray-500"></span>
						<span id="seedingStatusText" class="text-sm text-gray-300">Not polling</span>
					</div>
					<div class="text-sm text-gray-400">
						<span id="seedingLastUpdate">--</span>
						<span class="mx-2">|</span>
						<span id="seedingParticipantCount">0 participants</span>
						<span id="seedingSource" class="ml-2 hidden"></span>
					</div>
				</div>

				<!-- AI Seeding Progress Indicator -->
				<div id="aiSeedingProgress" class="hidden mb-4 bg-gray-750 rounded-lg p-4">
					<div class="flex items-center gap-3">
						<svg class="animate-spin h-5 w-5 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
							<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
							<path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
						</svg>
						<span id="aiSeedingProgressText" class="text-sm text-purple-300">Analyzing player data...</span>
					</div>
				</div>

				<!-- Bracket Balance Display (AI mode only) -->
				<div id="bracketBalanceDisplay" class="hidden mb-4 bg-gray-750 rounded-lg p-4">
					<h3 class="text-sm font-medium text-gray-300 mb-2">Bracket Balance</h3>
					<div class="flex items-center gap-4">
						<div class="flex-1">
							<div class="flex justify-between text-xs text-gray-400 mb-1">
								<span>Top Half</span>
								<span id="topHalfElo">--</span>
							</div>
							<div class="h-2 bg-gray-700 rounded-full overflow-hidden">
								<div id="topHalfBar" class="h-full bg-blue-500 transition-all duration-300" style="width: 50%"></div>
							</div>
						</div>
						<div class="text-sm font-medium text-gray-300" id="bracketBalancePercent">50/50</div>
						<div class="flex-1">
							<div class="flex justify-between text-xs text-gray-400 mb-1">
								<span id="bottomHalfElo">--</span>
								<span>Bottom Half</span>
							</div>
							<div class="h-2 bg-gray-700 rounded-full overflow-hidden">
								<div id="bottomHalfBar" class="h-full bg-green-500 transition-all duration-300" style="width: 50%"></div>
							</div>
						</div>
					</div>
				</div>

				<!-- AI Seeding Overall Reasoning (AI mode only) -->
				<div id="aiSeedingReasoning" class="hidden mb-4 bg-gray-750 rounded-lg p-4">
					<h3 class="text-sm font-medium text-gray-300 mb-2">AI Analysis</h3>
					<p id="aiReasoningText" class="text-sm text-gray-400"></p>
					<div id="aiAvoidedMatchups" class="mt-2 hidden">
						<h4 class="text-xs font-medium text-gray-400 mb-1">Avoided Repeat Matchups:</h4>
						<ul id="avoidedMatchupsList" class="text-xs text-gray-500 list-disc list-inside"></ul>
					</div>
					<div id="aiNewPlayerPlacements" class="mt-2 hidden">
						<h4 class="text-xs font-medium text-gray-400 mb-1">New Player Protection:</h4>
						<ul id="newPlayerPlacementsList" class="text-xs text-gray-500 list-disc list-inside"></ul>
					</div>
				</div>

				<!-- Seeding Table -->
				<div id="seedingContent">
					<p class="text-gray-400 text-center py-8">Select a tournament to view seeding suggestions</p>
				</div>

				<!-- Apply Seeding Button -->
				<div id="seedingActions" class="hidden mt-4 flex items-center justify-between border-t border-gray-700 pt-4">
					<div class="text-sm text-gray-400">
						<span id="seedingChangesCount">0</span> seeding changes suggested
					</div>
					<div class="flex items-center gap-3">
						<button onclick="regenerateAISeeding()" id="regenerateSeedingBtn"
							class="hidden bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md transition text-sm disabled:opacity-50">
							Regenerate
						</button>
						<button onclick="applySeedingSuggestions()"
							class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md transition text-sm disabled:opacity-50"
							id="applySeedingBtn">
							Apply Suggested Seeding
						</button>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Player Profile Modal -->
	<div id="playerProfileModal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
		<div class="bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-gray-700">
			<div class="p-6">
				<div class="flex items-center justify-between mb-6">
					<h3 id="profilePlayerName" class="text-xl font-bold text-white">Player Name</h3>
					<button onclick="closePlayerProfile()" class="text-gray-400 hover:text-white">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
						</svg>
					</button>
				</div>
				<div id="profileContent">
					<!-- Profile content will be loaded here -->
				</div>
			</div>
		</div>
	</div>

	<!-- Archive Modal -->
	<div id="archiveModal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
		<div class="bg-gray-800 rounded-lg max-w-lg w-full max-h-[90vh] overflow-y-auto border border-gray-700">
			<div class="p-6">
				<div class="flex items-center justify-between mb-6">
					<h3 class="text-xl font-bold text-white">Archive Tournaments</h3>
					<button onclick="closeArchiveModal()" class="text-gray-400 hover:text-white">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
						</svg>
					</button>
				</div>
				<p class="text-gray-400 text-sm mb-4">Archive completed tournaments to track historical data and player statistics.</p>
				<div id="archiveContent">
					<p class="text-gray-400 text-center py-4">Loading tournaments...</p>
				</div>
			</div>
		</div>
	</div>

	<!-- Tournament Details Modal -->
	<div id="tournamentModal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
		<div class="bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto border border-gray-700">
			<div class="p-6">
				<div class="flex items-center justify-between mb-6">
					<h3 id="tournamentModalTitle" class="text-xl font-bold text-white">Tournament Details</h3>
					<button onclick="closeTournamentModal()" class="text-gray-400 hover:text-white">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
						</svg>
					</button>
				</div>
				<div id="tournamentModalContent">
					<!-- Tournament details will be loaded here -->
				</div>
			</div>
		</div>
	</div>

	<!-- Narrative Modal -->
	<div id="narrativeModal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
		<div class="bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] flex flex-col border border-gray-700">
			<!-- Modal Header -->
			<div class="p-4 border-b border-gray-700 flex justify-between items-center flex-shrink-0">
				<div>
					<h3 class="text-xl font-bold text-white">Tournament Recap</h3>
					<p id="narrativeTournamentName" class="text-sm text-gray-400 mt-1"></p>
				</div>
				<button onclick="closeNarrativeModal()" class="text-gray-400 hover:text-white">
					<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
					</svg>
				</button>
			</div>

			<!-- Format Tabs -->
			<div class="px-4 pt-4 flex gap-2 flex-shrink-0">
				<button id="narrativeTabSocial" onclick="switchNarrativeFormat('social')"
					class="px-4 py-2 rounded-lg bg-gray-700 text-gray-300 hover:bg-gray-600 transition">
					Social
				</button>
				<button id="narrativeTabDiscord" onclick="switchNarrativeFormat('discord')"
					class="px-4 py-2 rounded-lg bg-blue-600 text-white">
					Discord
				</button>
				<button id="narrativeTabFull" onclick="switchNarrativeFormat('full')"
					class="px-4 py-2 rounded-lg bg-gray-700 text-gray-300 hover:bg-gray-600 transition">
					Full Report
				</button>
			</div>

			<!-- Progress Indicator -->
			<div id="narrativeProgress" class="px-4 py-8 hidden">
				<div class="flex flex-col items-center justify-center gap-3">
					<div class="animate-spin h-8 w-8 border-2 border-blue-500 border-t-transparent rounded-full"></div>
					<span id="narrativeProgressText" class="text-gray-300">Generating narrative...</span>
				</div>
			</div>

			<!-- Content -->
			<div id="narrativeContent" class="flex-1 overflow-y-auto p-4">
				<div id="narrativeText" class="prose prose-invert max-w-none text-gray-200"></div>

				<!-- Storylines Section -->
				<div id="narrativeStorylines" class="mt-6 hidden">
					<h4 class="font-semibold text-white mb-3">Key Storylines Detected</h4>
					<div id="storylinesList" class="space-y-2 text-sm"></div>
				</div>
			</div>

			<!-- Footer Actions -->
			<div class="p-4 border-t border-gray-700 flex justify-between items-center flex-shrink-0">
				<div class="flex gap-2">
					<button onclick="copyNarrative()" class="px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 text-gray-200 transition flex items-center gap-2">
						<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path>
						</svg>
						Copy
					</button>
					<button onclick="regenerateNarrative()" id="regenerateNarrativeBtn"
						class="px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600 text-gray-200 transition flex items-center gap-2">
						<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
						</svg>
						Regenerate
					</button>
				</div>
				<div id="narrativeSource" class="text-sm text-gray-400"></div>
			</div>
		</div>
	</div>

	<!-- Scripts -->
	<script src="js/utils.js?v=3"></script>
	<script src="js/nav.js?v=2"></script>
	<script src="js/pwa.js?v=2"></script>
	<script src="js/analytics.js?v=1"></script>
	<script>
		document.addEventListener('DOMContentLoaded', () => {
			initNavigation('Analytics');
		});
	</script>
</body>
</html>
