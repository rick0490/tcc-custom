<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Tournament Signup</title>

	<!-- PWA Meta Tags -->
	<meta name="description" content="Sign up for Neil's Bahr gaming tournaments">
	<meta name="theme-color" content="#111827">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="apple-mobile-web-app-title" content="Tournament Signup">
	<link rel="manifest" href="/manifest.json">

	<!-- Apple Touch Icons -->
	<link rel="apple-touch-icon" href="/icons/icon-152x152.svg">
	<link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.svg">
	<link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.svg">
	<link rel="apple-touch-icon" sizes="128x128" href="/icons/icon-128x128.svg">
	<link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.svg">
	<link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.svg">
	<link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.svg">
	<link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.svg">
	<link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.svg">

	<!-- Favicon -->
	<link rel="icon" type="image/svg+xml" href="/icons/icon-72x72.svg">

	<script src="https://cdn.tailwindcss.com"></script>
	<script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
	<style>
		/* CSS Custom Properties from Style Guide */
		:root {
			--color-black-deep: #111827;
			--gray-800: #1f2937;
			--gray-700: #374151;
			--gray-600: #4b5563;
			--gray-500: #6b7280;
			--gray-400: #9ca3af;
			--gray-300: #d1d5db;
			--gray-200: #e5e7eb;
			--gray-100: #f3f4f6;
			--color-white-soft: #f3f4f6;
			--color-action: #3b82f6;
			--color-success: #10b981;
			--color-warning: #f59e0b;
			--color-error: #ef4444;
			--color-accent: #E63946;
			--radius-sm: 4px;
			--radius-md: 8px;
			--radius-lg: 12px;
			--space-xs: 4px;
			--space-sm: 8px;
			--space-md: 16px;
			--space-lg: 24px;
			--space-xl: 32px;
			--duration-fast: 150ms;
			--duration-normal: 300ms;
			--ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
		}

		body {
			background: var(--color-black-deep);
			min-height: 100vh;
			color: var(--color-white-soft);
		}

		/* Light mode overrides */
		.light body,
		html.light body {
			background: var(--gray-100);
			color: var(--gray-800);
		}

		.tournament-card {
			background: var(--gray-800);
			border: 1px solid var(--gray-700);
		}

		.light .tournament-card {
			background: #ffffff;
			border-color: var(--gray-200);
		}

		.loading {
			display: inline-block;
			width: 20px;
			height: 20px;
			border: 3px solid var(--gray-600);
			border-radius: 50%;
			border-top-color: var(--color-action);
			animation: spin 0.8s ease-in-out infinite;
		}

		@keyframes spin {
			to { transform: rotate(360deg); }
		}

		/* Skeleton loading animation */
		@keyframes shimmer {
			0% {
				background-position: -200% 0;
			}
			100% {
				background-position: 200% 0;
			}
		}

		.skeleton {
			background: linear-gradient(
				90deg,
				var(--gray-700) 25%,
				var(--gray-600) 50%,
				var(--gray-700) 75%
			);
			background-size: 200% 100%;
			animation: shimmer 1.5s infinite ease-in-out;
			border-radius: var(--radius-md);
		}

		.light .skeleton {
			background: linear-gradient(
				90deg,
				var(--gray-200) 25%,
				var(--gray-300) 50%,
				var(--gray-200) 75%
			);
			background-size: 200% 100%;
		}

		.skeleton-text {
			height: 1em;
			margin-bottom: 0.5em;
		}

		.skeleton-text-lg {
			height: 1.5em;
		}

		.skeleton-badge {
			height: 2.5rem;
			width: 10rem;
		}

		.btn-primary {
			background: var(--color-action);
			transition: transform var(--duration-fast) var(--ease-standard),
			            box-shadow var(--duration-fast) var(--ease-standard),
			            background var(--duration-fast) var(--ease-standard);
		}

		.btn-primary:hover {
			transform: translateY(-2px);
			box-shadow: 0 10px 25px rgba(59, 130, 246, 0.4);
			background: #2563eb;
		}

		.btn-primary:active {
			transform: translateY(0);
		}

		.btn-primary:disabled {
			opacity: 0.6;
			cursor: not-allowed;
			transform: none;
		}

		.btn-secondary {
			background: var(--gray-700);
			transition: background var(--duration-fast) var(--ease-standard);
		}

		.btn-secondary:hover {
			background: var(--gray-600);
		}

		.light .btn-secondary {
			background: var(--gray-200);
			color: var(--gray-800);
		}

		.light .btn-secondary:hover {
			background: var(--gray-300);
		}

		/* Form inputs */
		.form-input {
			background: var(--gray-700);
			border: 1px solid var(--gray-600);
			color: var(--color-white-soft);
			transition: border-color var(--duration-fast) var(--ease-standard),
			            box-shadow var(--duration-fast) var(--ease-standard);
		}

		.form-input::placeholder {
			color: var(--gray-500);
		}

		.form-input:focus {
			border-color: var(--color-action);
			box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
			outline: none;
		}

		.light .form-input {
			background: #ffffff;
			border-color: var(--gray-300);
			color: var(--gray-800);
		}

		.light .form-input:focus {
			border-color: var(--color-action);
		}

		/* Focus visible for accessibility */
		:focus-visible {
			outline: 2px solid var(--color-action);
			outline-offset: 2px;
		}

		button:focus-visible,
		a:focus-visible,
		input:focus-visible {
			outline: 2px solid var(--color-action);
			outline-offset: 2px;
		}

		/* State cards */
		.state-card {
			background: var(--gray-700);
			border: 1px solid var(--gray-600);
		}

		.state-card-warning {
			background: rgba(245, 158, 11, 0.1);
			border-color: var(--color-warning);
		}

		.state-card-error {
			background: rgba(239, 68, 68, 0.1);
			border-color: var(--color-error);
		}

		.state-card-success {
			background: rgba(16, 185, 129, 0.1);
			border-color: var(--color-success);
		}

		.state-card-info {
			background: rgba(59, 130, 246, 0.1);
			border-color: var(--color-action);
		}

		/* Theme transition */
		body, .tournament-card, .form-input, .btn-secondary {
			transition: background var(--duration-normal) var(--ease-standard),
			            border-color var(--duration-normal) var(--ease-standard),
			            color var(--duration-normal) var(--ease-standard);
		}
	</style>
</head>
<body class="flex items-center justify-center p-4">
	<div class="tournament-card rounded-xl shadow-2xl p-6 max-w-md w-full">
		<!-- Header Controls: Push Toggle + Theme Toggle -->
		<div class="flex justify-end gap-2 mb-4">
			<!-- Push Notification Toggle -->
			<button id="push-toggle" class="p-2 rounded-lg btn-secondary" aria-label="Toggle push notifications" title="Enable push notifications">
				<!-- Bell On icon (subscribed) -->
				<svg id="bell-on-icon" class="w-5 h-5 hidden" fill="currentColor" viewBox="0 0 24 24">
					<path d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
				</svg>
				<!-- Bell Off icon (not subscribed) -->
				<svg id="bell-off-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
				</svg>
				<!-- Bell Slash icon (denied/unavailable) -->
				<svg id="bell-slash-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/>
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"/>
				</svg>
			</button>

			<!-- Theme Toggle -->
			<button id="theme-toggle" class="p-2 rounded-lg btn-secondary" aria-label="Toggle theme">
				<!-- Sun icon (shown in dark mode) -->
				<svg id="sun-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
				</svg>
				<!-- Moon icon (shown in light mode) -->
				<svg id="moon-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
				</svg>
			</button>
		</div>

		<!-- Tournament Name -->
		<div id="tournament-header" class="text-center mb-6">
			<div id="loading-tournament" class="space-y-4">
				<!-- Skeleton: Tournament name -->
				<div class="skeleton skeleton-text-lg w-3/4 mx-auto" style="height: 2rem;"></div>
				<!-- Skeleton: Game name -->
				<div class="skeleton skeleton-text w-1/3 mx-auto" style="height: 0.875rem;"></div>
				<!-- Skeleton: Participant badge -->
				<div class="skeleton skeleton-badge mx-auto mt-4" style="border-radius: 0.5rem;"></div>
			</div>
			<div id="tournament-info" class="hidden">
				<h1 id="tournament-name" class="text-2xl font-bold mb-2"></h1>
				<p id="game-name" class="text-sm text-gray-400 uppercase tracking-wide"></p>

				<!-- Participant Count -->
				<div class="mt-4 inline-flex items-center bg-blue-500/20 text-blue-400 px-4 py-2 rounded-lg text-sm">
					<svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
						<path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
					</svg>
					<span><span id="participant-count">0</span> participants</span>
					<span id="ws-indicator" class="ml-2 w-2 h-2 rounded-full bg-gray-500" title="Live updates disconnected"></span>
				</div>

				<!-- Capacity Display (shown when signup cap is set) -->
				<div id="capacity-section" class="hidden mt-4">
					<div class="text-sm text-gray-400 mb-2">
						<span id="capacity-text">0 of 0 spots filled</span>
					</div>
					<div class="w-full bg-gray-700 rounded-full h-2.5 overflow-hidden">
						<div id="capacity-bar" class="bg-purple-500 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
					</div>
					<div id="capacity-urgency" class="hidden mt-2 text-sm font-semibold"></div>
				</div>

			</div>
			<div id="error-tournament" class="hidden text-red-400">
				<svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
				</svg>
				<p class="text-sm">No active tournament</p>
			</div>
		</div>

		<!-- Participant Lookup Section -->
		<div id="lookup-section" class="mb-6">
			<button id="lookup-toggle" class="w-full text-center text-sm text-gray-400 hover:text-gray-300 transition-colors py-2">
				Already registered? Check your status
			</button>
			<div id="lookup-form" class="hidden mt-3">
				<div class="flex gap-2">
					<input
						type="text"
						id="lookup-name"
						placeholder="Enter your name..."
						autocomplete="off"
						autocorrect="off"
						autocapitalize="off"
						spellcheck="false"
						class="form-input flex-1 px-3 py-2 rounded-lg text-sm"
					>
					<button id="lookup-btn" class="btn-primary text-white font-medium px-4 py-2 rounded-lg text-sm">
						Search
					</button>
				</div>
			</div>
			<div id="lookup-result" class="hidden mt-3">
				<!-- Found result -->
				<div id="lookup-found" class="hidden state-card state-card-success rounded-lg p-4">
					<div class="flex items-start gap-3">
						<div class="w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center flex-shrink-0">
							<svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
							</svg>
						</div>
						<div class="flex-1 min-w-0">
							<p class="font-semibold text-green-400" id="lookup-found-name"></p>
							<p class="text-sm text-gray-400 mb-2">You're registered!</p>

							<!-- Enhanced Details -->
							<div class="grid grid-cols-2 gap-2 text-xs mt-2">
								<div class="bg-gray-700/50 rounded px-2 py-1">
									<span class="text-gray-500">Seed:</span>
									<span class="text-gray-300 ml-1" id="lookup-seed">--</span>
								</div>
								<div class="bg-gray-700/50 rounded px-2 py-1">
									<span class="text-gray-500">Registered:</span>
									<span class="text-gray-300 ml-1" id="lookup-registered-at">--</span>
								</div>
							</div>

							<!-- Match Status (shown when tournament underway) -->
							<div id="lookup-match-status" class="hidden mt-3 p-2 rounded bg-blue-500/10 border border-blue-500/30">
								<div id="lookup-current-match" class="hidden">
									<p class="text-xs text-blue-400 font-semibold mb-1">Current Match</p>
									<p class="text-sm text-gray-300">
										vs <span id="lookup-opponent" class="font-medium">--</span>
									</p>
									<p class="text-xs text-gray-400 mt-1">
										<span id="lookup-match-state" class="capitalize">--</span>
										<span id="lookup-station" class="ml-2 hidden">â€¢ <span id="lookup-station-name">--</span></span>
									</p>
								</div>
								<div id="lookup-eliminated" class="hidden">
									<p class="text-xs text-red-400 font-semibold">Eliminated</p>
									<p class="text-sm text-gray-400">
										Record: <span id="lookup-record" class="text-gray-300">0-0</span>
									</p>
								</div>
								<div id="lookup-waiting" class="hidden">
									<p class="text-xs text-yellow-400">Waiting for next match...</p>
									<p class="text-sm text-gray-400">
										Record: <span id="lookup-record-waiting" class="text-gray-300">0-0</span>
									</p>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- Not found result -->
				<div id="lookup-not-found" class="hidden state-card state-card-warning rounded-lg p-4">
					<div class="flex items-center gap-3">
						<div class="w-10 h-10 rounded-full bg-yellow-500/20 flex items-center justify-center">
							<svg class="w-5 h-5 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
							</svg>
						</div>
						<div>
							<p class="font-semibold text-yellow-400">Not Found</p>
							<p class="text-sm text-gray-400">No registration found for that name</p>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- View Rules Button -->
		<div id="view-rules-section" class="mb-6">
			<a href="/rules" class="block w-full text-center btn-secondary text-gray-300 font-medium py-3 px-6 rounded-lg border border-gray-600">
				<span class="flex items-center justify-center gap-2">
					<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
					</svg>
					View Tournament Rules & Prizes
				</span>
			</a>
		</div>

		<!-- State-Specific Messages -->

		<!-- Registration Closed Message (Too Early) -->
		<div id="registration-closed-early" class="hidden mb-6 state-card state-card-warning rounded-lg p-6 text-center">
			<div class="w-16 h-16 mx-auto mb-3 rounded-full bg-yellow-500/20 flex items-center justify-center">
				<svg class="w-8 h-8 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
				</svg>
			</div>
			<h2 class="text-xl font-bold text-yellow-400 mb-2">Registration Opens Soon!</h2>
			<p class="text-gray-300 mb-4">Registration will open:</p>
			<p class="text-lg font-semibold text-yellow-300 mb-2" id="registration-opens-in">--</p>
			<div id="opens-countdown" class="text-2xl font-bold text-yellow-400 mb-2">--:--:--</div>
			<p id="user-timezone-hint" class="text-xs text-gray-500 mb-2"></p>
			<p class="text-sm text-gray-400">Check back closer to the tournament date to sign up!</p>
		</div>

		<!-- Tournament Full Message -->
		<div id="tournament-full-message" class="hidden mb-6 state-card state-card-error rounded-lg p-6 text-center">
			<div class="w-16 h-16 mx-auto mb-3 rounded-full bg-red-500/20 flex items-center justify-center">
				<svg class="w-8 h-8 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"/>
				</svg>
			</div>
			<h2 class="text-xl font-bold text-red-400 mb-2">Tournament Full!</h2>
			<p class="text-gray-300 mb-2">This tournament has reached its maximum capacity.</p>
			<div class="text-2xl font-bold text-red-400" id="capacity-display">--/--</div>

			<!-- Waitlist Section -->
			<div id="waitlist-section" class="mt-4 pt-4 border-t border-gray-600">
				<p class="text-sm text-gray-400 mb-3">Want to be notified if a spot opens?</p>
				<div id="waitlist-form" class="space-y-3">
					<input
						type="text"
						id="waitlist-name"
						placeholder="Enter your name..."
						autocomplete="off"
						autocorrect="off"
						autocapitalize="off"
						spellcheck="false"
						class="form-input w-full px-3 py-2 rounded-lg text-sm"
					>
					<input
						type="email"
						id="waitlist-email"
						placeholder="Email (optional, for notifications)"
						autocomplete="email"
						class="form-input w-full px-3 py-2 rounded-lg text-sm"
					>
					<button id="join-waitlist-btn" class="w-full btn-primary text-white font-medium py-2 px-4 rounded-lg text-sm">
						Join Waitlist
					</button>
				</div>
				<div id="waitlist-joined" class="hidden">
					<div class="flex items-center justify-center gap-2 text-green-400 mb-2">
						<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
						</svg>
						<span class="font-semibold">You're on the waitlist!</span>
					</div>
					<p class="text-sm text-gray-400">Position: #<span id="waitlist-position">-</span></p>
					<p class="text-xs text-gray-500 mt-2">You'll be automatically added if a spot opens.</p>
				</div>
			</div>
		</div>

		<!-- Check-in Phase Message -->
		<div id="checkin-message" class="hidden mb-6 state-card state-card-success rounded-lg p-6 text-center">
			<div class="w-16 h-16 mx-auto mb-3 rounded-full bg-green-500/20 flex items-center justify-center">
				<svg class="w-8 h-8 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
				</svg>
			</div>
			<h2 class="text-xl font-bold text-green-400 mb-2">Check-In Open!</h2>
			<p class="text-gray-300 mb-4">Registration is closed. If you already registered, please check in with a tournament organizer.</p>
			<div class="text-sm text-gray-400">Tournament starting soon...</div>
		</div>

		<!-- Underway Phase Message -->
		<div id="underway-message" class="hidden mb-6 state-card state-card-info rounded-lg p-6 text-center">
			<div class="w-16 h-16 mx-auto mb-3 rounded-full bg-blue-500/20 flex items-center justify-center">
				<svg class="w-8 h-8 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/>
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
				</svg>
			</div>
			<h2 class="text-xl font-bold text-blue-400 mb-2">Tournament In Progress</h2>
			<p class="text-gray-300 mb-4">Registration is closed. The tournament has started!</p>
			<a href="#" id="view-bracket-link" target="_blank" rel="noopener noreferrer" class="inline-block btn-primary text-white font-semibold py-3 px-6 rounded-lg">
				View Live Bracket
			</a>
		</div>

		<!-- Complete Phase Message -->
		<div id="complete-message" class="hidden mb-6 text-center">
			<div class="state-card rounded-lg p-6 mb-6" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.2) 0%, rgba(234, 179, 8, 0.1) 100%); border-color: #f59e0b;">
				<div class="w-16 h-16 mx-auto mb-3 rounded-full bg-yellow-500/20 flex items-center justify-center">
					<svg class="w-8 h-8 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
						<path fill-rule="evenodd" d="M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z" clip-rule="evenodd"/>
					</svg>
				</div>
				<h2 class="text-2xl font-bold text-yellow-400 mb-2">Tournament Complete!</h2>
				<p class="text-gray-300">Thank you to all participants!</p>
			</div>

			<!-- Podium Display -->
			<div id="podium-display" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
				<!-- Podium will be populated dynamically -->
			</div>

			<a href="#" id="view-results-link" target="_blank" rel="noopener noreferrer" class="inline-block btn-secondary text-gray-300 font-semibold py-3 px-6 rounded-lg border border-gray-600">
				View Full Results
			</a>
		</div>

		<!-- Signup Form -->
		<form id="signup-form" class="space-y-6">
			<div>
				<label for="participant-name" class="block text-sm font-medium text-gray-300 mb-2">
					Your Name
				</label>
				<input
					type="text"
					id="participant-name"
					name="participantName"
					placeholder="Enter your name or tag"
					required
					maxlength="50"
					autocomplete="off"
					autocorrect="off"
					autocapitalize="off"
					spellcheck="false"
					class="form-input w-full px-4 py-3 rounded-lg text-base"
				>
				<p class="mt-2 text-xs text-gray-500">This will be your display name in the tournament</p>
			</div>

			<div>
				<label for="instagram" class="block text-sm font-medium text-gray-300 mb-2">
					Instagram Handle <span class="text-gray-500 font-normal">(Optional)</span>
				</label>
				<div class="relative">
					<span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 text-base">@</span>
					<input
						type="text"
						id="instagram"
						name="instagram"
						placeholder="yourhandle"
						maxlength="30"
						pattern="[a-zA-Z0-9._]+"
						autocomplete="off"
						autocorrect="off"
						autocapitalize="off"
						spellcheck="false"
						class="form-input w-full pl-10 pr-4 py-3 rounded-lg text-base"
					>
				</div>
				<p class="mt-2 text-xs text-gray-500">We'll tag you on Neil's Bahr Instagram if you place on the podium!</p>
			</div>

			<div>
				<label for="notes" class="block text-sm font-medium text-gray-300 mb-2">
					Notes <span class="text-gray-500 font-normal">(Optional)</span>
				</label>
				<textarea
					id="notes"
					name="notes"
					placeholder="Let us know if you have any special needs or requests!"
					maxlength="200"
					rows="2"
					autocomplete="off"
					class="form-input w-full px-4 py-3 rounded-lg text-base resize-none"
				></textarea>
				<p class="mt-2 text-xs text-gray-500">Let organizers know about any special requirements</p>
			</div>

			<div id="error-message" class="hidden state-card state-card-error rounded-lg p-4">
				<div class="flex items-start gap-3">
					<svg class="w-5 h-5 text-red-400 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
						<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
					</svg>
					<p class="text-sm text-red-400" id="error-text"></p>
				</div>
			</div>

			<button
				type="submit"
				id="submit-btn"
				class="btn-primary w-full text-white font-semibold py-4 px-6 rounded-lg shadow-lg text-lg"
			>
				Join Tournament
			</button>
		</form>

		<!-- New Signup Notification Toast -->
		<div id="signup-notification" class="hidden fixed bottom-4 left-1/2 -translate-x-1/2 bg-green-500/20 border border-green-500/50 text-green-400 px-4 py-3 rounded-lg shadow-lg transform transition-all duration-300 opacity-0 translate-y-2 z-50">
			<div class="flex items-center gap-2">
				<svg class="w-5 h-5 text-green-400" fill="currentColor" viewBox="0 0 20 20">
					<path d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"/>
				</svg>
				<span><span id="signup-notification-name" class="font-semibold"></span> just signed up!</span>
			</div>
		</div>

		<!-- Offline Queue Status Indicator -->
		<div id="offline-queue-indicator" class="hidden mt-4 state-card state-card-warning rounded-lg p-4">
			<div class="flex items-center justify-between">
				<div class="flex items-center gap-2">
					<svg class="w-5 h-5 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
					</svg>
					<span class="text-sm text-yellow-400">
						<span id="offline-queue-count">0</span> signup(s) pending sync
					</span>
				</div>
				<button id="offline-sync-btn" class="px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded text-sm hover:bg-yellow-500/30 transition-colors">
					Sync Now
				</button>
			</div>
			<p class="text-xs text-gray-400 mt-2">Your signups were saved offline and will sync when you're back online.</p>
		</div>

		<!-- Service Worker Update Banner -->
		<div id="sw-update-banner" class="hidden fixed top-0 left-0 right-0 bg-blue-600 text-white px-4 py-3 shadow-lg z-50">
			<div class="max-w-md mx-auto flex items-center justify-between gap-3">
				<div class="flex items-center gap-2">
					<svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
					</svg>
					<span class="text-sm">New version available</span>
				</div>
				<button id="sw-update-btn" class="px-3 py-1 bg-white text-blue-600 rounded font-medium text-sm hover:bg-blue-50 transition-colors">
					Refresh
				</button>
			</div>
		</div>

		<!-- Footer -->
		<div class="mt-8 text-center text-gray-500 text-xs">
			<p>Powered by Challonge</p>
		</div>
	</div>

	<!-- JavaScript Modules -->
	<script type="module" src="/js/app.js"></script>
</body>
</html>
